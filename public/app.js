(()=>{"use strict";var t={862:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),s(333);const n=i(s(919)),a=i(s(520)),r=i(s(799)),o=i(s(647)),h=i(s(898)),c=i(s(530)),l=i(s(790)),u={width:800,height:600,type:Phaser.AUTO,parent:"content",title:"Dot Box"};class d extends Phaser.Game{constructor(t){h.default.LogSceneMethodEntry("Game","constructor"),super(t),this.scene.add(n.default.Name,n.default),this.scene.add(a.default.Name,a.default),this.scene.add(o.default.Name,o.default),this.scene.add(r.default.Name,r.default),this.scene.add(c.default.Name,c.default),this.scene.add(l.default.Name,l.default),this.scene.start(n.default.Name)}}e.default=d,window.onload=()=>{new d(u)}},919:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(520)),a=i(s(898));class r extends Phaser.Scene{preload(){}create(){a.default.LogSceneMethodEntry("Boot","create"),this.scene.start(n.default.Name)}}e.default=r,r.Name="Boot"},530:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(898));class a extends Phaser.Scene{constructor(){super(...arguments),this.graphics=null,this.path=null,this.curve=[],this.points={},this.firstDot=null,this.secDot=null,this.rowCount=11,this.columnCount=9,this.right=100,this.top=50,this.rectangleWith=50,this.lineCount=0,this.colors=[],this.turnCounter=0,this.turns=[],this.turnIndex=0,this.createdLines=[],this.boxesAnchorPoint=[],this.prevBoxCount=0}preload(){}create(){n.default.LogSceneMethodEntry("MainGame","create"),this.colors=[16711680,255],this.lineCount=(this.rowCount-1)*this.columnCount+(this.columnCount-1)*this.rowCount,this.graphics=this.add.graphics(),this.path={t:0,vec:new Phaser.Math.Vector2};for(var t=0;t<this.lineCount;t++)this.curve[t]=new Phaser.Curves.Line([-10,-10,-60,-40]),this.turns[t]=0;var e=0;for(let t=0;t<this.columnCount;t++)for(let s=0;s<this.rowCount;s++){const i=this.add.image(t*this.rectangleWith+this.right,s*this.rectangleWith+this.top,"dragcircle",1).setInteractive();i.name=e.toString(),this.points[i.name]=[i,new Phaser.Math.Vector2(t,s)],this.input.setDraggable([i]),e++}this.input.on("dragstart",((t,e)=>{e.setFrame(1),this.firstDot=e,i=this.points[e.name][1].y,a=this.points[e.name][1].x})),this.input.on("dragend",((t,e)=>{e.setFrame(0)}));let s=0,i=0,a=0;this.input.on("pointerover",((t,e)=>{e[0].setFrame(1),this.firstDot!=e[0]&&null!=this.firstDot&&(this.secDot=e[0])})),this.input.on("pointerout",((t,e)=>{e[0].setFrame(0)})),this.input.on("pointerup",(t=>{if(null!=this.firstDot&&null!=this.secDot){if(this.firstDot==this.secDot)return;var e=this.points[this.secDot.name][1].y,n=this.points[this.secDot.name][1].x;if(i!=e&&a!=n)return;if(Math.abs(i-e)>1||Math.abs(a-n)>1)return;if(this.createdLines.filter((t=>t[0]==this.firstDot.name&&t[1]==this.secDot.name||t[1]==this.firstDot.name&&t[0]==this.secDot.name)).length>0)return;this.curve[s].p0=new Phaser.Math.Vector2(this.firstDot.x,this.firstDot.y),this.curve[s].p1=new Phaser.Math.Vector2(this.secDot.x,this.secDot.y),s++,s>=this.curve.length&&(s=0),this.createdLines.push([this.firstDot.name,this.secDot.name]),this.turns[this.turnIndex]=this.turnCounter,this.checkBox()||this.turnCounter++,this.turnIndex++,this.firstDot=null}}))}checkBox(){var t=[[0,this.rowCount],[1,this.rowCount+1],[0,1],[this.rowCount,this.rowCount+1]],e=0,s=0,i=99999;for(let n=0;n<this.columnCount;n++)for(let a=0;a<this.rowCount-1;a++)s=0,i=99999,t.forEach((t=>{var a=t[0]+(e+n),r=t[1]+(e+n);a<i&&(i=a),r<i&&(i=r),this.createdLines.filter((t=>t[0]==a&&t[1]==r||t[1]==a&&t[0]==r)).length>0&&s++})),4==s&&0==this.boxesAnchorPoint.filter((t=>t.point==i)).length&&this.boxesAnchorPoint.push({point:i,r:a,c:n,turn:this.turnCounter}),e++;return this.prevBoxCount!=this.boxesAnchorPoint.length&&(this.prevBoxCount=this.boxesAnchorPoint.length,!0)}reset(){this.prevBoxCount=0,this.turns=null,this.turns=[],this.turnCounter=0,this.turnIndex=0,this.createdLines=null,this.createdLines=[],this.lineCount=(this.rowCount-1)*this.columnCount+(this.columnCount-1)*this.rowCount;for(var t=0;t<this.lineCount;t++)null==this.curve[t]?this.curve[t]=new Phaser.Curves.Line([-10,-10,-60,-40]):(this.curve[t].p0=new Phaser.Math.Vector2(-10,-10),this.curve[t].p1=new Phaser.Math.Vector2(-60,-60)),this.turns[t]=0;this.firstDot=null,this.secDot=null}update(t,e){this.graphics.clear();for(var s=0;s<this.createdLines.length;s++)this.graphics.lineStyle(10,this.colors[this.turns[s]%2],.5),this.curve[s].draw(this.graphics);this.boxesAnchorPoint.forEach((t=>{this.graphics.fillStyle(this.colors[t.turn%2],.2),this.graphics.fillRect(t.c*this.rectangleWith+this.right,t.r*this.rectangleWith+this.top,this.rectangleWith,this.rectangleWith)}))}}e.default=a,a.Name="MainGame"},799:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(898)),a=i(s(530)),r=i(s(790));class o extends Phaser.Scene{preload(){}create(){n.default.LogSceneMethodEntry("MainMenu","create");const t=this.cameras.main.height/3,e=this.add.text(this.cameras.main.centerX,t,"--[[ Start ]]--");e.setFontFamily("monospace").setFontSize(40).setFill("#fff").setAlign("center").setOrigin(.5),e.setInteractive(),e.on("pointerdown",(()=>{this.scene.start(a.default.Name)}),this);const s=this.add.text(this.cameras.main.centerX,2*t,"Settings");s.setOrigin(.5),s.setFontFamily("monospace").setFontSize(30).setFill("#fff"),s.setInteractive(),s.on("pointerdown",(()=>{this.scene.start(r.default.Name)}),this)}update(){}}e.default=o,o.Name="MainMenu"},790:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(898)),a=i(s(799));class r extends Phaser.Scene{create(){n.default.LogSceneMethodEntry("MainSettings","create");const t=this.cameras.main.height/4,e=this.add.text(this.cameras.main.centerX,2*t,"Go Back");e.setOrigin(.5).setFontFamily("monospace").setFontSize(25).setFill("#fff").setInteractive(),e.on("pointerdown",(()=>{this.scene.start(a.default.Name)}),this)}}e.default=r,r.Name="MainSettings"},520:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(647)),a=i(s(898));class r extends Phaser.Scene{preload(){this.addProgressBar(),this.load.path="assets/",this.load.image("phaser_pixel_medium_flat"),this.load.image("Phaser-Logo-Small"),this.load.spritesheet("dragcircle","dragcircle.png",{frameWidth:16})}create(){a.default.LogSceneMethodEntry("Preloader","create"),this.scene.start(n.default.Name)}update(){}addProgressBar(){const t=this.cameras.main.width,e=this.cameras.main.height,s="#ffffff",i=this.add.graphics(),n=this.add.graphics();n.fillStyle(2236962,.8),n.fillRect(t/4,e/2-30,t/2,50);const a=this.make.text({x:t/2,y:e/2-50,text:"Loading...",style:{font:"20px monospace",color:s}});a.setOrigin(.5,.5);const r=this.make.text({x:t/2,y:e/2-5,text:"0%",style:{font:"18px monospace",color:"#ffffff"}});r.setOrigin(.5,.5);const o=this.make.text({x:t/2,y:e/2+50,text:"",style:{font:"18px monospace",color:s}});o.setOrigin(.5,.5),this.load.on("progress",(s=>{r.setText(parseInt(100*s+"",10)+"%"),i.clear(),i.fillStyle(16777215,1),i.fillRect(t/4+10,e/2-30+10,(t/2-10-10)*s,30)})),this.load.on("fileprogress",(t=>{o.setText("Loading asset: "+t.key)})),this.load.on("complete",(()=>{i.destroy(),n.destroy(),a.destroy(),r.destroy(),o.destroy()}))}}e.default=r,r.Name="Preloader"},647:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(s(898)),a=i(s(799));class r extends Phaser.Scene{preload(){this.load.path="assets/"}create(){n.default.LogSceneMethodEntry("SplashScreen","create"),this.add.text(this.cameras.main.centerX,.5*this.cameras.main.centerY,"Dot Box Created by: Reza Baghbani").setOrigin(.5,0).setFontFamily("monospace").setFontSize(26).setFill("#fff");const t=this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-25,"Powered By");t.setOrigin(.5,.5),t.setFontFamily("monospace").setFontSize(20).setFill("#fff"),this.add.image(this.cameras.main.centerX,this.cameras.main.centerY,"phaser_pixel_medium_flat"),this.input.setDefaultCursor("pointer"),this.input.on("pointerdown",this.loadMainMenu,this),this.time.addEvent({delay:3e3,callback:this.loadMainMenu,callbackScope:this,loop:!1})}loadMainMenu(){this.scene.start(a.default.Name)}}e.default=r,r.Name="SplashScreen"},898:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static Log(t){console.log((new Date).toISOString()+" : "+t)}static LogSceneMethodEntry(t,e){this.Log("Entered "+t+" "+e+"()")}}},333:t=>{t.exports=Phaser}},e={};!function s(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,s),a.exports}(862)})();
//# sourceMappingURL=app.js.map